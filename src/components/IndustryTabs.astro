---
interface Tab {
    id: string;
    icon: string;
    title: string;
    headline: string;
    description: string;
    image: string;
}

interface Props {
    tabs?: Tab[];
}

const defaultTabs: Tab[] = [
    {
        id: "websites",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>`,
        title: "High-Performance Websites",
        headline: "Websites Built to Increase Service Calls",
        description:
            "A high-performing business website is one of the most reliable tools for turning online interest into booked work. We design sites that load quickly, guide potential customers to the right service pages, and support SEO that helps you rank higher across competitive queries. Each layout highlights core services, reviews, and pathways that help generate more jobs calling you.",
        image: "/images/high-performance-website.png",
    },
    {
        id: "seo",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>`,
        title: "Search Engine Optimization",
        headline: "Dominate Local Search Results",
        description:
            "Get found by customers exactly when they need you. Our AI-driven SEO strategies target high-intent keywords in your specific service area, ensuring your business appears at the top of Google results. We handle technical SEO, on-page content, and local listings to build long-term organic visibility.",
        image: "/images/seo-dashboard.png",
    },
    {
        id: "ppc",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>`,
        title: "PPC | Search Engine Marketing",
        headline: "Instant Leads with Precision Targeting",
        description:
            "Stop wasting budget on broad clicks. Our PPC campaigns are laser-focused on converting customers. We use AI to optimize bid strategies and ad copy in real-time, delivering high-quality leads from Google Ads and Bing. maximize your ROAS with data-driven paid search management.",
        image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=2000",
    },
    {
        id: "content",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>`,
        title: "Content Marketing",
        headline: "Authority-Building Content Strategy",
        description:
            "Position your brand as the industry leader. We create educational, SEO-optimized content that answers your customers' questions and builds trust. From blog posts to guides and case studies, our content engine drives traffic and nurtures leads through the decision-making process.",
        image: "https://images.unsplash.com/photo-1552664730-d307ca884978?auto=format&fit=crop&q=80&w=2000",
    },
    {
        id: "social",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11" /></svg>`,
        title: "Social Media Marketing",
        headline: "Engage and Grow Your Audience",
        description:
            "Build a loyal community and drive brand awareness. We create and manage engaging social media campaigns across platforms like Facebook, Instagram, and LinkedIn to connect with your customers where they spend their time.",
        image: "/images/social-media-dashboard.png",
    },
    {
        id: "analytics",
        icon: `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>`,
        title: "Reporting & Analytics",
        headline: "Transparent Data & Insights",
        description:
            "Know exactly where every dollar goes. Our real-time dashboards provide complete transparency into your marketing performance. Track calls, form submissions, and revenue attribution so you can make informed decisions and see the tangible ROI of your campaigns.",
        image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=2000",
    },
];

const { tabs = defaultTabs } = Astro.props;
---

<section class="services-tabs">
    <div class="container">
        <div class="tabs-wrapper">
            <!-- Sidebar Navigation -->
            <div class="tabs-nav">
                {
                    tabs.map((tab, index) => (
                        <button
                            class={`tab-button ${index === 0 ? "active" : ""}`}
                            data-target={tab.id}
                            aria-label={`Show ${tab.title}`}
                        >
                            <div class="tab-icon" set:html={tab.icon} />
                            <span class="tab-title">{tab.title}</span>
                        </button>
                    ))
                }
            </div>

            <!-- Content Area -->
            <div class="tabs-content">
                {
                    tabs.map((tab, index) => (
                        <div
                            id={tab.id}
                            class={`tab-pane ${index === 0 ? "active" : ""}`}
                        >
                            <div class="content-display">
                                <div class="image-wrapper">
                                    <div class="laptop-frame">
                                        <img
                                            src={tab.image}
                                            alt={tab.title}
                                            loading="lazy"
                                        />
                                    </div>
                                </div>
                                <div class="text-content">
                                    <h3>{tab.headline}</h3>
                                    <p>{tab.description}</p>
                                    <a href="#contact" class="cta-link">
                                        Request a Free Estimate &rarr;
                                    </a>
                                </div>
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(".tab-button");
        const panes = document.querySelectorAll(".tab-pane");

        buttons.forEach((button) => {
            button.addEventListener("click", () => {
                // Remove active class from all buttons and panes
                buttons.forEach((b) => b.classList.remove("active"));
                panes.forEach((p) => p.classList.remove("active"));

                // Add active class to clicked button
                button.classList.add("active");

                // Show corresponding pane
                const targetId = button.getAttribute("data-target");
                if (targetId) {
                    const targetPane = document.getElementById(targetId);
                    if (targetPane) {
                        targetPane.classList.add("active");
                    }
                }
            });
        });
    });
</script>

<style>
    .services-tabs {
        padding: 6rem 0;
        background: #0f172a;
        color: white;
    }

    .tabs-wrapper {
        display: flex;
        gap: 4rem;
        align-items: flex-start;
    }

    /* Navigation Sidebar */
    .tabs-nav {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        width: 350px;
        flex-shrink: 0;
    }

    .tab-button {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem 1.5rem;
        background: transparent;
        border: none;
        border-radius: 0.75rem;
        color: #94a3b8;
        text-align: left;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        font-size: 1rem;
        font-weight: 500;
    }

    .tab-button:hover {
        color: white;
        background: rgba(255, 255, 255, 0.05);
    }

    .tab-button.active {
        background: var(--primary, #3b82f6);
        color: white;
        box-shadow:
            0 4px 6px -1px rgba(0, 0, 0, 0.1),
            0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .tab-icon {
        width: 24px;
        height: 24px;
        flex-shrink: 0;
    }

    .tab-title {
        flex-grow: 1;
    }

    /* Content Area */
    .tabs-content {
        flex-grow: 1;
        min-height: 500px;
        position: relative;
        background: #1e293b;
        border-radius: 1.5rem;
        padding: 3rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .tab-pane {
        display: none;
        animation: fadeIn 0.4s ease;
        height: 100%;
    }

    .tab-pane.active {
        display: block;
    }

    /* Content Layout */
    .content-display {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        height: 100%;
    }

    .image-wrapper {
        width: 100%;
        border-radius: 1rem;
        overflow: hidden;
        position: relative;
        box-shadow:
            0 20px 25px -5px rgba(0, 0, 0, 0.1),
            0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .laptop-frame {
        border: 12px solid #334155;
        border-radius: 12px;
        border-bottom-width: 24px;
        background: #000;
    }

    .image-wrapper img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        display: block;
    }

    .text-content {
        margin-top: 1rem;
    }

    .text-content h3 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: white;
    }

    .text-content p {
        color: #cbd5e1;
        margin-bottom: 2rem;
        line-height: 1.7;
        font-size: 1.1rem;
    }

    .cta-link {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: #22c55e;
        color: white;
        font-weight: 600;
        border-radius: 0.5rem;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .cta-link:hover {
        background: #16a34a;
        transform: translateY(-1px);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (max-width: 1024px) {
        .tabs-wrapper {
            flex-direction: column;
        }

        .tabs-nav {
            width: 100%;
            flex-direction: row;
            overflow-x: auto;
            padding-bottom: 1rem;
        }

        .tab-button {
            width: auto;
            white-space: nowrap;
        }
    }
</style>
