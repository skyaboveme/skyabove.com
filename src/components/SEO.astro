---
export interface Props {
  title: string;
  description: string;
  canonical?: string;
  ogType?: string;
  ogImage?: string;
  noindex?: boolean;
  serviceName?: string;
  serviceDescription?: string;
  keywords?: string;
}

const {
  title,
  description,
  canonical = Astro.url.href,
  ogType = "website",
  ogImage = "https://skyabove.com/og-image.jpg",
  noindex = false,
  serviceName,
  serviceDescription,
  keywords,
} = Astro.props;

// Base Schema for the Agency
const organizationSchema = {
  "@type": "ProfessionalService",
  "@id": "https://skyabove.com/#organization",
  name: "Skyabove",
  description:
    "Complete AI-powered marketing solutions including website design, SEO, social media marketing, SEM, and display advertising.",
  url: "https://skyabove.com",
  logo: "https://skyabove.com/logo.png",
  telephone: "+1-951-760-0896",
  email: "hello@skyabove.com",
  address: {
    "@type": "PostalAddress",
    addressLocality: "Austin",
    addressRegion: "TX",
    addressCountry: "US",
  },
  sameAs: [
    "https://twitter.com/skyabove",
    "https://linkedin.com/company/skyabove",
    "https://facebook.com/skyabove",
  ],
  priceRange: "$$",
};

// Dynamic Service Schema (if applicable)
const serviceSchema = serviceName
  ? {
      "@type": "Service",
      name: serviceName,
      description: serviceDescription || description,
      provider: {
        "@id": "https://skyabove.com/#organization",
      },
      areaServed: "US",
      hasOfferCatalog: {
        "@type": "OfferCatalog",
        name: "Marketing Services",
        itemListElement: [
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "AI Marketing",
            },
          },
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "SEO",
            },
          },
          {
            "@type": "Offer",
            itemOffered: {
              "@type": "Service",
              name: "Web Design",
            },
          },
        ],
      },
    }
  : null;

// Combined Schema Graph
const structuredData = {
  "@context": "https://schema.org",
  "@graph": [organizationSchema, ...(serviceName ? [serviceSchema] : [])],
};

const baseKeywords =
  "AI marketing agency, AI-powered digital marketing, AI marketing services, artificial intelligence marketing, digital marketing agency, SEO services, content creation services, custom website development, advanced SEO, predictive marketing";
const pageKeywords = keywords ? `${keywords}, ${baseKeywords}` : baseKeywords;
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<link rel="canonical" href={canonical} />
{noindex && <meta name="robots" content="noindex,nofollow" />}

<!-- Open Graph / Facebook -->
<meta property="og:type" content={ogType} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={ogImage} />
<meta property="og:site_name" content="Skyabove" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonical} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={ogImage} />

<!-- Additional SEO -->
<meta name="keywords" content={pageKeywords} />
<meta name="author" content="Skyabove" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="language" content="English" />

<!-- Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
